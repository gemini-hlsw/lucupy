
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.6">
    
    
      
        <title>utils - Lucupy Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lucupy.sky.utils" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Lucupy Docs" class="md-header__button md-logo" aria-label="Lucupy Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lucupy Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              utils
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/gemini-hlsw/lucupy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Lucupy Docs" class="md-nav__button md-logo" aria-label="Lucupy Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Lucupy Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gemini-hlsw/lucupy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        WELCOME
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">lucupy</a>
          
            <label for="__nav_2_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="lucupy" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          lucupy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../decorators/" class="md-nav__link">
        decorators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../helpers/" class="md-nav__link">
        helpers
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_3" type="checkbox" id="__nav_2_1_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../minimodel/">minimodel</a>
          
            <label for="__nav_2_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="minimodel" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          minimodel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/atom/" class="md-nav__link">
        atom
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/constraints/" class="md-nav__link">
        constraints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/group/" class="md-nav__link">
        group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/magnitude/" class="md-nav__link">
        magnitude
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/observation/" class="md-nav__link">
        observation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/observationmode/" class="md-nav__link">
        observationmode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/program/" class="md-nav__link">
        program
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/qastate/" class="md-nav__link">
        qastate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/resource/" class="md-nav__link">
        resource
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/semester/" class="md-nav__link">
        semester
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/site/" class="md-nav__link">
        site
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/target/" class="md-nav__link">
        target
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/timeallocation/" class="md-nav__link">
        timeallocation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/timingwindow/" class="md-nav__link">
        timingwindow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../minimodel/too/" class="md-nav__link">
        too
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4" type="checkbox" id="__nav_2_1_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../observatory/">observatory</a>
          
            <label for="__nav_2_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="observatory" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          observatory
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../observatory/abstract/" class="md-nav__link">
        abstract
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4_2" type="checkbox" id="__nav_2_1_4_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../observatory/gemini/">gemini</a>
          
            <label for="__nav_2_1_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="gemini" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_4_2">
          <span class="md-nav__icon md-icon"></span>
          gemini
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../observatory/gemini/geminiobservation/" class="md-nav__link">
        geminiobservation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../observatory/gemini/geminiproperties/" class="md-nav__link">
        geminiproperties
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_5" type="checkbox" id="__nav_2_1_5" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">sky</a>
          
            <label for="__nav_2_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="sky" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          sky
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../altitude/" class="md-nav__link">
        altitude
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../brightness/" class="md-nav__link">
        brightness
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../constants/" class="md-nav__link">
        constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../moon/" class="md-nav__link">
        moon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sun/" class="md-nav__link">
        sun
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        utils
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils" class="md-nav__link">
    lucupy.sky.utils
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.current_geocent_frame" class="md-nav__link">
    current_geocent_frame()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.geocentric_coors" class="md-nav__link">
    geocentric_coors()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.hour_angle_to_angle" class="md-nav__link">
    hour_angle_to_angle()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.local_midnight_time" class="md-nav__link">
    local_midnight_time()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.local_sidereal_time" class="md-nav__link">
    local_sidereal_time()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.min_max_alt" class="md-nav__link">
    min_max_alt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.true_airmass" class="md-nav__link">
    true_airmass()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.xair" class="md-nav__link">
    xair()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.ztwilight" class="md-nav__link">
    ztwilight()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../timeutils/" class="md-nav__link">
        timeutils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../types/" class="md-nav__link">
        types
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils" class="md-nav__link">
    lucupy.sky.utils
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.current_geocent_frame" class="md-nav__link">
    current_geocent_frame()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.geocentric_coors" class="md-nav__link">
    geocentric_coors()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.hour_angle_to_angle" class="md-nav__link">
    hour_angle_to_angle()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.local_midnight_time" class="md-nav__link">
    local_midnight_time()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.local_sidereal_time" class="md-nav__link">
    local_sidereal_time()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.min_max_alt" class="md-nav__link">
    min_max_alt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.true_airmass" class="md-nav__link">
    true_airmass()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.xair" class="md-nav__link">
    xair()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lucupy.sky.utils.ztwilight" class="md-nav__link">
    ztwilight()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/gemini-hlsw/lucupy/edit/master/lucupy/sky/utils.py" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>utils</h1>

<div class="doc doc-object doc-module">


<a id="lucupy.sky.utils"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.current_geocent_frame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">current_geocent_frame</span><span class="p">(</span><span class="n">time</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Get current frame for the equinox specified by the time.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>time</code></td>
          <td>
                <code><span title="astropy.time.Time">Time</span></code>
          </td>
          <td><p>If an array then the first entry is used</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="astropy.coordinates.BaseRADecFrame">BaseRADecFrame</span></code>
          </td>
          <td><p>an astropy PrecessedGeocentric time.</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.geocentric_coors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geocentric_coors</span><span class="p">(</span><span class="n">geolong</span><span class="p">,</span> <span class="n">geolat</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Geocentric XYZ coordinates for a location at a longitude, latitude and height above sea level.</p>
<p>Retained because if one replaces the longitude input with the
sidereal time, the return is the XYZ in the equatorial frame
of date.  This is used in the lunar topocentric correction.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>geolong</code></td>
          <td>
                <code><span title="astropy.coordinates.Angle">Angle</span></code>
          </td>
          <td><p>Geographic longitude, or LST to get celestial-aligned result</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>geolat</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Geographic latitude</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>height</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Height above sea level, which must be in meters.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Tuple">Tuple</span>[float, float, float]</code>
          </td>
          <td><p>Triple of distances.</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.hour_angle_to_angle" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hour_angle_to_angle</span><span class="p">(</span><span class="n">dec</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">alt</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Transform the Hour Angle in to an Angle.</p>
<p>The hour angle from spherical astronomy, eastor west of meridian,
not the u.hourangle from astropy.</p>
<p>dec and alt must have the same dimensions.</p>
<p>If the object is always above alt, an Angle of +1000 radians is returned.
If always below, -1000 radians.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code><span title="lucupy.sky.altitude.AngleParam">AngleParam</span></code>
          </td>
          <td><p>Declination of source.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>lat</code></td>
          <td>
                <code><span title="lucupy.sky.altitude.AngleParam">AngleParam</span></code>
          </td>
          <td><p>Latitude of site.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>alt</code></td>
          <td>
                <code><span title="lucupy.sky.altitude.AngleParam">AngleParam</span></code>
          </td>
          <td><p>Height above horizon for computation.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="astropy.coordinates.Angle">Angle</span></code>
          </td>
          <td><p>An Angle giving the hour angle at which the declination dec reaches altitude alt.</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.local_midnight_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">local_midnight_time</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">localtzone</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Find nearest local midnight (UT).</p>
<p>If it's before noon local time, returns previous midnight;
if after noon, return next midnight.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>time</code></td>
          <td>
                <code><span title="astropy.time.Time">Time</span></code>
          </td>
          <td><p>astropy Time object</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>localtzone</code></td>
          <td>
                <code>timezone) </code>
          </td>
          <td><p>Timezone object.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="astropy.time.Time">Time</span></code>
          </td>
          <td><p>Time. This is not zone-aware, but should be correct.</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.local_sidereal_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">local_sidereal_time</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Moderate-precision (1 sec) local sidereal time.</p>
<p>Adapted with minimal changes from skycalc routine. Native
astropy routines are unnecessarily precise for our purposes and
rather slow.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>time</code></td>
          <td>
                <code><span title="astropy.time.Time">Time</span></code>
          </td>
          <td><p>Time at which to compute the local sidereal time.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>location</code></td>
          <td>
                <code>Location</code>
          </td>
          <td><p>Location on Earth for which to compute the local sidereal time.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>lst</code></td>          <td>
                <code><span title="astropy.coordinates.Angle">Angle</span></code>
          </td>
          <td><p>Local sidereal time.</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.min_max_alt" class="doc doc-heading">
<code class="highlight language-python"><span class="n">min_max_alt</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">dec</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Finds the minimum and maximum altitudes of a celestial location.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>lat</code></td>
          <td>
                <code>Angle) </code>
          </td>
          <td><p>Latitude of site.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code>AngleParam) </code>
          </td>
          <td><p>Declination of the object.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Tuple">Tuple</span>[<span title="astropy.coordinates.Angle">Angle</span>, <span title="astropy.coordinates.Angle">Angle</span>]</code>
          </td>
          <td><p>minalt, maxalt (Tuple[Angle, Angle]): tuple of minimum and maximum altitudes.</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.true_airmass" class="doc doc-heading">
<code class="highlight language-python"><span class="n">true_airmass</span><span class="p">(</span><span class="n">altit</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>True airmass for an altitude.
Equivalent of getAirmass in the QPT, based on vskyutil.true_airmass
https://github.com/gemini-hlsw/ocs/blob/12a0999bc8bb598220ddbccbdbab5aa1e601ebdd/bundle/edu.gemini.qpt.client/src/main/java/edu/gemini/qpt/core/util/ImprovedSkyCalcMethods.java#L119</p>
<p>Based on a fit to Kitt Peak airmass tables, C. M. Snell &amp; A. M. Heiser, 1968,
PASP, 80, 336.  Valid to about airmass 12, and beyond that just returns
secz minus 1.5, which won't be quite right.</p>
<p>Takes an Angle and return the true airmass, based on a tabulation of the mean KPNO
atmosphere given by C. M. Snell &amp; A. M. Heiser, 1968, PASP, 80, 336.
They tabulated the airmass at 5 degr intervals from z = 60 to 85 degrees; The data was fit  with
a fourth order poly for (secz - airmass) as a function of (secz - 1) using
the IRAF curfit routine, then adjusted the zeroth order term to force (secz - airmass) to zero at
z = 0.  The poly fit is very close to the tabulated points (largest difference is 3.2e-4)
and appears smooth. This 85-degree point is at secz = 11.47, so for secz &gt; 12 just return secz</p>
<p>coefs = [2.879465E-3,  3.033104E-3, 1.351167E-3, -4.716679E-5]</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>altit</code></td>
          <td>
                <code><span title="astropy.coordinates.Angle">Angle</span></code>
          </td>
          <td><p>Altitude above horizon.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="numpy.typing">npt</span>.<span title="numpy.typing.NDArray">NDArray</span>[float]</code>
          </td>
          <td><p>True airmass value</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.xair" class="doc doc-heading">
<code class="highlight language-python"><span class="n">xair</span><span class="p">(</span><span class="n">zd</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Evaluate true airmass.</p>
<p>Equation 3 from Krisciunas &amp;  Schaefer 1991.
Trick for handling arrays and scalars from
https://stackoverflow.com/questions/29318459/python-function-that-handles-scalar-or-arrays</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>zd</code></td>
          <td>
                <code><span title="astropy.units.Quantity">Quantity</span></code>
          </td>
          <td><p>Float or numpy array of zenith distance angles</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="numpy.typing">npt</span>.<span title="numpy.typing.NDArray">NDArray</span>[float]</code>
          </td>
          <td><p>npt.NDArray[float]: values converted.</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="lucupy.sky.utils.ztwilight" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ztwilight</span><span class="p">(</span><span class="n">alt</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Estimate twilight contribution to zenith sky brightness, in magnitudes per square arcsecond.</p>
<p>Evaluates a polynomial approximation to observational data (see source for
reference) of zenith sky brightness (blue) as a function of the sun's elevation
from -0.9 degrees to -18 degrees.  For reference, 3 mag is roughly Nautical
twilight and looks 'pretty dark'; something like 10 mag is about the maximum
for broadband sky flats in many cases.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>alt</code></td>
          <td>
                <code><span title="astropy.coordinates.Angle">Angle</span></code>
          </td>
          <td><p>Sun's elevation.  Meaningful range is -0.9 to -18 degrees.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="numpy.typing">npt</span>.<span title="numpy.typing.NDArray">NDArray</span>[float]</code>
          </td>
          <td><p>An array but if the sun is up, returns 20; if the sun below -18, returns 0.</p></td>
        </tr>
    </tbody>
  </table>

  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../sun/" class="md-footer__link md-footer__link--prev" aria-label="Previous: sun" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              sun
            </div>
          </div>
        </a>
      
      
        
        <a href="../../timeutils/" class="md-footer__link md-footer__link--next" aria-label="Next: timeutils" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              timeutils
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (c) 2016-2022 Association of Universities for Research in Astronomy, Inc. (AURA)
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>